{% extends 'base.html' %}
{% load static %}
{% csrf_token %}
    
{% block stylesheet %}
    <link rel="stylesheet" href="{% static './services/css/sproduct.css' %}">
{% endblock stylesheet %}
    
{% block title %} Realme C55{% endblock title %}

{% block main %}
    <section class="sproduct">
        <div class="row">
            <div class="col-img">
                <div class="main-img">
                    {% if product.images|length %}
                    <img src="{{product.images.0.image.url}}" alt="{{product.name}}" id="MainImg">
                    {% endif %}
                </div>
                <div class="small-img-grp">
                    {% for image in product.images %}
                    <div class="small-img-col">
                        <img src="{{image.image.url}}" alt="" class="small-img">
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="col-details">
                <div class="spro-title">
                    <h3>{{product.name}}</h3>
                </div>
                <div class="spro-price">
                    <strong>
                        <small>₹</small>
                        {{product.new_price}}
                    </strong>
                    <del>
                        ₹{{product.old_price}}
                    </del>
                </div>
                <div class="spro-specs">
                    <h4>Highlights</h4>
                    <ul>
                        {% for description in product.descriptions %}
                        <li><span>{{description.description}}</span></li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="buy-cart">
                    <div class="cart"><a href="{% url 'add_to_cart_url' product.id %}"><i class="fa-solid fa-cart-shopping"></i>Add to Cart</a></div>
                    <div class="buy"><a href=""><i class="fa-solid fa-bolt-lightning"></i>Buy Now</a></div>
                </div>
            </div>
        </div>
    </section>
    <script>

        var maining = document.getElementById("MainImg");
        var smallimg = document.getElementsByClassName("small-img");
        var i = 0;
        smallimg[0].onclick = function () {
            maining.src = smallimg[0].src;
        }
        smallimg[1].onclick = function () {
            maining.src = smallimg[1].src;
        }
        smallimg[2].onclick = function () {
            maining.src = smallimg[2].src;
        }
        smallimg[3].onclick = function () {
            maining.src = smallimg[3].src;
        }
        const starRating = document.querySelector('.star-rating');
        const stars = starRating.querySelectorAll('.fa-star');
        const ratingInput = document.getElementById('rating-input');

        stars.forEach((star, index) => {
            star.addEventListener('click', () => {
                const rating = index + 1;
                setRating(rating);
            });

            star.addEventListener('mouseover', () => {
                highlightStars(index);
            });

            star.addEventListener('mouseleave', () => {
                highlightStars(ratingInput.value - 1);
            });
        });
        function setRating(rating) {
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('checked');
                } else {
                    star.classList.remove('checked');
                }
            });

            ratingInput.value = rating;
        }
        function highlightStars(rating) {
            stars.forEach((star, index) => {
                if (index <= rating) {
                    star.classList.add('checked');
                } else {
                    star.classList.remove('checked');
                }
            });
        }
        function show() {
            if (i == 0) {
                document.getElementById('review-form').style.display = 'block';
                document.getElementById('review-form').style.transition = " width 2s, height 4s;";
                i = i + 1;
                window.scrollBy(0, 200)
            }
            else {
                document.getElementById('review-form').style.display = 'none';
                document.getElementById('review-form').style.transition = " width 2s, height 4s;";
                i = i - 1;
            }
        }
    </script>
{% endblock main %}